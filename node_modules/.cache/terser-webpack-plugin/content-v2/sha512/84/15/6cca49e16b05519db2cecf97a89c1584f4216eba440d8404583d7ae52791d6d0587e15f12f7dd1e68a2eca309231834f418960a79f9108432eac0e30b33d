{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{109:function(t,a,i){\"use strict\";var n=i(21);i.n(n).a},113:function(t,a,i){\"use strict\";var n=i(22);i.n(n).a},114:function(t,a,i){\"use strict\";var n=i(23);i.n(n).a},118:function(t,a,i){\"use strict\";i.r(a);var n=i(24),e=function(){var t=this.$createElement;return(this._self._c||t)(\"router-view\")};e._withStripped=!0;i(62);var s=i(8),r=Object(s.a)({},e,[],!1,null,null,null);r.options.__file=\"src/App.vue\";var p=r.exports,h=i(38),u=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i(\"div\",{attrs:{id:\"main-wrapper\"}},[i(\"score\",{attrs:{scores:t.scores,xNum:t.xNum,yNum:t.yNum,isFull:t.isFull},on:{reGameEvt:t.initPanMap}}),t._v(\" \"),i(\"div\",{class:[t.isMobile?\"mobile\":\"\"],attrs:{id:\"game-wrapper\"}},[t._l(t.panMap,(function(a,n){return t._l(a,(function(a,e){return i(\"pan\",{key:n+\",\"+e,attrs:{x:n,y:e,num:a,panWidth:t.panWidth,panHeight:t.panHeight}})}))}))],2)],1)};u._withStripped=!0;i(63),i(76),i(78),i(60),i(96);var o=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i(\"div\",{attrs:{id:\"score-wrapper\"}},[i(\"div\",{staticClass:\"inner-wrapper\"},[i(\"h1\",{attrs:{id:\"header-wrapper\"}},[t._v(\"\\n            2048\\n        \")]),t._v(\" \"),i(\"div\",{class:[t.isFull?\"full\":\"\"],attrs:{id:\"score\"}},[i(\"h3\",{attrs:{id:\"score-title\"}},[t._v(\"得分\")]),t._v(\" \"),i(\"p\",{attrs:{id:\"score-content\"}},[t._v(t._s(t.scores))])]),t._v(\" \"),i(\"div\",{attrs:{id:\"re-game-wrapper\"}},[i(\"div\",[i(\"label\",[t._v(\"纵向个数:\")]),i(\"input\",{staticClass:\"x-num num\",attrs:{type:\"number\"},domProps:{value:t.yNum}})]),t._v(\" \"),i(\"div\",[i(\"label\",[t._v(\"横向个数:\")]),i(\"input\",{staticClass:\"y-num num\",attrs:{type:\"number\"},domProps:{value:t.xNum}})]),t._v(\" \"),i(\"button\",{attrs:{id:\"re-game\"},on:{click:t.reGameEvt}},[t._v(\"重新开始\")])])])])};o._withStripped=!0;i(61);var c={name:\"score\",props:{scores:{type:Number,required:!0},xNum:{type:Number,required:!0},yNum:{type:Number,required:!0},isFull:{type:Boolean,required:!0}},methods:{reGameEvt:function(){if(confirm(\"确定重新开始游戏？\")){var t=Number(document.querySelector(\".y-num\").value),a=Number(document.querySelector(\".x-num\").value);if(t>10||a>10)return void alert(\"不能大于10！\");this.$emit(\"reGameEvt\",t,a)}}}},d=(i(109),Object(s.a)(c,o,[],!1,null,\"6dab9192\",null));d.options.__file=\"src/components/Score.vue\";var m=d.exports,l=function(){var t=this.$createElement;return(this._self._c||t)(\"div\",{class:[\"pan-wrapper\",\"num-\"+this.num,\"pan-\"+this.x+this.y]},[this._v(\"\\n    \"+this._s(0===this.num?\"\":this.num)+\"\\n\")])};l._withStripped=!0;i(110);var f={name:\"pan\",props:{num:{type:Number,required:!0},panWidth:{type:Number,required:!0},panHeight:{type:Number,required:!0},x:{type:Number,required:!0},y:{type:Number,required:!0}},mounted:function(){this.initPanWrapper()},methods:{initPanWrapper:function(){var t=document.querySelector(\".pan-\".concat(this.x).concat(this.y));t.style.width=this.panWidth+\"px\",t.style.height=this.panHeight+\"px\"}}},M=(i(113),Object(s.a)(f,l,[],!1,null,\"61e97fc6\",null));M.options.__file=\"src/components/Pan.vue\";var v={name:\"index\",data:function(){return{scores:0,panMap:[[]],xNum:4,yNum:4,panWidth:0,panHeight:0,isFull:!1}},mounted:function(){this.initPanMap(),this.initkeyUp()},computed:{isMobile:function(){return navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)}},methods:{initGameWrapper:function(){var t=this;return new Promise((function(a,i){var n=document.querySelector(\"#game-wrapper\");document.querySelectorAll(\".pan-wrapper\");n.style.width=100*t.yNum+\"px\",n.style.height=100*t.xNum+\"px\";var e=n.clientWidth,s=n.clientHeight;t.panWidth=e/t.yNum*((t.yNum-.5)/t.yNum),t.panHeight=s/t.xNum*((t.xNum-.5)/t.xNum),a()}))},initPanMap:function(t,a){var i=this;this.scores=0,this.panMap.length=0,this.isFull=!1,t&&a&&(this.xNum=t,this.yNum=a),this.initGameWrapper().then((function(){for(var t=0;t<i.xNum;t++){i.$set(i.panMap,t,new Array);for(var a=0;a<i.yNum;a++)i.panMap[t][a]=0}for(var n=0;n<2;n++)i.addNum()}))},initkeyUp:function(){var t,a,i,n,e,s,r=this;this.isMobile?(document.addEventListener(\"touchstart\",(function(i){i.preventDefault(),t=i.touches[0].pageX,a=i.touches[0].pageY}),!1),document.addEventListener(\"touchend\",(function(p){p.preventDefault(),i=p.changedTouches[0].pageX,n=p.changedTouches[0].pageY,e=i-t,s=n-a,Math.abs(e)>Math.abs(s)&&e>50?r.addRight():Math.abs(e)>Math.abs(s)&&e<-50?r.addLeft():Math.abs(s)>Math.abs(e)&&s>50?r.addDown():Math.abs(s)>Math.abs(e)&&s<-50&&r.addUp()}),!1)):document.addEventListener(\"keyup\",(function(t){switch(t.keyCode){case 38:r.addUp();break;case 39:r.addRight();break;case 40:r.addDown();break;case 37:r.addLeft()}}))},addUp:function(){for(var t,a=!1,i=0;i<this.yNum;i++){t=1;for(var n=0;n<this.xNum-1;){for(;this.panMap[n+t]&&0===this.panMap[n+t][i];)t++;this.panMap[n+t]&&this.panMap[n][i]===this.panMap[n+t][i]&&(this.scores+=2*this.panMap[n][i],a=!0,this.$set(this.panMap[n],i,this.panMap[n][i]+this.panMap[n+t][i]),this.panMap[n+t][i]=0),n+=t,t=1}}this.clearUp(a)},clearUp:function(t){for(var a,i=0;i<this.yNum;i++){a=1;for(var n=0;n<this.xNum-1;n++)if(!this.panMap[n][i]){for(;this.panMap[n+a]&&0===this.panMap[n+a][i];)a++;this.panMap[n+a]&&(t=!0,this.$set(this.panMap[n],i,this.panMap[n+a][i]),this.panMap[n+a][i]=0)}}t&&this.addNum()},addDown:function(){for(var t,a=!1,i=this.yNum-1;i>=0;i--){t=1;for(var n=this.xNum-1;n>0;){for(;this.panMap[n-t]&&0===this.panMap[n-t][i];)t++;this.panMap[n-t]&&this.panMap[n][i]===this.panMap[n-t][i]&&(this.scores+=2*this.panMap[n][i],a=!0,this.$set(this.panMap[n],i,this.panMap[n][i]+this.panMap[n-t][i]),this.panMap[n-t][i]=0),n-=t,t=1}}this.clearDown(a)},clearDown:function(t){for(var a,i=this.yNum-1;i>=0;i--){a=1;for(var n=this.xNum-1;n>0;n--)if(!this.panMap[n][i]){for(;this.panMap[n-a]&&0===this.panMap[n-a][i];)a++;this.panMap[n-a]&&(t=!0,this.$set(this.panMap[n],i,this.panMap[n-a][i]),this.panMap[n-a][i]=0)}}t&&this.addNum()},addLeft:function(){for(var t,a=!1,i=0;i<this.xNum;i++){t=1;for(var n=0;n<this.yNum-1;){for(;0===this.panMap[i][n+t];)t++;this.panMap[i][n]===this.panMap[i][n+t]&&(this.scores+=2*this.panMap[i][n],a=!0,this.$set(this.panMap[i],n,this.panMap[i][n]+this.panMap[i][n+t]),this.panMap[i][n+t]=0),n+=t,t=1}}this.clearLeft(a)},clearLeft:function(t){for(var a,i=0;i<this.xNum;i++){a=1;for(var n=0;n<this.yNum-1;n++)if(!this.panMap[i][n]){for(;0===this.panMap[i][n+a];)a++;this.panMap[i][n+a]&&(t=!0,this.$set(this.panMap[i],n,this.panMap[i][n+a]),this.panMap[i][n+a]=0)}}t&&this.addNum()},addRight:function(){for(var t,a=!1,i=0;i<this.xNum;i++){t=1;for(var n=this.yNum-1;n>0;){for(;0===this.panMap[i][n-t];)t++;this.panMap[i][n]===this.panMap[i][n-t]&&(this.scores+=2*this.panMap[i][n],a=!0,this.$set(this.panMap[i],n,this.panMap[i][n]+this.panMap[i][n-t]),this.panMap[i][n-t]=0),n-=t,t=1}}this.clearRight(a)},clearRight:function(t){for(var a,i=0;i<this.xNum;i++){a=1;for(var n=this.yNum-1;n>0;n--)if(!this.panMap[i][n]){for(;0===this.panMap[i][n-a];)a++;this.panMap[i][n-a]&&(t=!0,this.$set(this.panMap[i],n,this.panMap[i][n-a]),this.panMap[i][n-a]=0)}}t&&this.addNum()},addNum:function(){var t=Math.floor(Math.random()*this.xNum),a=Math.floor(Math.random()*this.yNum);0===this.panMap[t][a]?(this.$set(this.panMap[t],a,Math.random()>.7?4:2),this.hasEmpty()||(this.isFull=!0)):this.addNum()},hasEmpty:function(){return this.panMap.some((function(t,a,i){return t.some((function(t,n){return!!(0===t||i[a-1]&&i[a-1][n]===t||i[a+1]&&i[a+1][n]===t||i[n-1]&&i[a][n-1]===t||i[n+1]&&i[a][n+1]===t)}))}))}},components:{score:m,pan:M.exports}},N=(i(114),Object(s.a)(v,u,[],!1,null,\"57509004\",null));N.options.__file=\"src/pages/index.vue\";var y=N.exports;n.a.use(h.a);var b=new h.a({routes:[{path:\"/\",component:y}]});new n.a({router:b,render:function(t){return t(p)}}).$mount(\"#app\")},20:function(t,a,i){},21:function(t,a,i){},22:function(t,a,i){},23:function(t,a,i){},62:function(t,a,i){\"use strict\";var n=i(20);i.n(n).a}},[[118,1,2]]]);","extractedComments":[]}